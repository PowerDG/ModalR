# 协定

- [ ] ABP相关引用包	与同项目**默认版本保持一致**（如4.3.0）
- [ ] 接口Action一律使用public **virtual** 修饰
- [ ] 服务的Update方法一律使用如下进行DTO映射转换

​		Map<**TSource**, **TDestination**>(TSource source, TDestination destination)；

- [ ] 遍历操作的Savechanges()不超过1000项时  写在循环外

- [ ] AsNoTracking无跟踪查询

  - AsNoTracking干什么的呢？无跟踪查询而已，也就是说查询出来的对象不能直接做修改。所以，我们在**做数据集合查询显示，而又不需要对集合修改并更新到数据库**的时候，一定不要忘记加上AsNoTracking。
  - 如果查询过程做了**select映射就不需要加AsNoTracking**。如：db.Students.Where(t=>t.Name.Contains("张三")).select(t=>new (t.Name,t.Age)).ToList();
  - [你必须知道的EF知识和经验](https://www.cnblogs.com/zhaopei/p/5721789.html)

- [ ] 控制器添加        protected **IHttpContextAccessor** m_accessor;

  在 **GetCurrentUserId**()方法配合下利用token解析获取当前UserId



# 功能

## ｛Account｝

### 认证



> **401 Unauthorized**： 该HTTP状态码表示认证错误，它是为了认证设计的，而不是为了授权设计的。收到401响应，表示请求没有被认证—压根没有认证或者认证不正确—但是请重新认证和重试。（一般在响应头部包含一个*WWW-Authenticate*来描述如何认证）。通常由web服务器返回，而不是web应用。从性质上来说是临时的东西。（服务器要求客户端重试）
>
> **403 Forbidden**：该HTTP状态码是关于授权方面的。从性质上来说是永久的东西，和应用的业务逻辑相关联。它比401更具体，更实际。收到403响应表示服务器完成认证过程，但是客户端请求没有权限去访问要求的资源。 
> 总的来说，**401 Unauthorized**响应应该用来表示缺失或错误的认证；**403 Forbidden**响应应该在这之后用，当用户被认证后，但用户没有被授权在特定资源上执行操作。
>
> > 作者：zlup 	链接：https://www.jianshu.com/p/6dceeebbde5b 	来源：简书 
> > 简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。



### 登录

记住上次登录时间，Local有记录则ajax判别跳转首页

## 鉴权

微服务架构下，一个应用会被拆分成若干个微应用，每个微应用都需要对访问进行鉴权，每个微应用都需要明确当前访问用户以及其权限。尤其当访问来源不只是浏览器，还包括其他服务的调用时，单体应用架构下的鉴权方式就不是特别合适了。在为服务架构下，要考虑外部应用接入的场景、用户	服务的鉴权、服务 - 服务的鉴权等[多种鉴权场景](https://www.cnblogs.com/huangjianping/p/7911750.html)。

### 鉴权方案

David Borsos 在伦敦的微服务大会上提出了四种方案：

https://www.cnblogs.com/huangjianping/p/7911750.html

> - 单点登录（SSO）
>
> 这种方案意味着每个面向用户的服务都必须与认证服务交互，这会产生大量非常琐碎的网络流量和重复的工作，当动辄数十个微应用时，这种方案的弊端会更加明显。
>
> - 分布式 Session 方案
>
> 分布式会话方案原理主要是将关于用户认证的信息存储在共享存储中，且通常由用户会话作为 key  来实现的简单分布式哈希映射。当用户访问微服务时，用户数据可以从共享存储中获取。在某些场景下，这种方案很不错，用户登录状态是不透明的。同时也是一个高可用且可扩展的解决方案。这种方案的缺点在于共享存储需要一定保护机制，因此需要通过安全链接来访问，这时解决方案的实现就通常具有相当高的复杂性了。
>
> - 客户端 Token 方案
>
> 令牌在客户端生成，由身份验证服务进行签名，并且必须包含足够的信息，以便可以在所有微服务中建立用户身份。令牌会附加到每个请求上，为微服务提供用户身份验证，这种解决方案的安全性相对较好，但身份验证注销是一个大问题，缓解这种情况的方法可以使用短期令牌和频繁检查认证服务等。对于客户端令牌的编码方案，Borsos  更喜欢使用 JSON Web Tokens（JWT），它足够简单且库支持程度也比较好。
>
> - 客户端 Token 与 API 网关结合
>
> 这个方案意味着所有请求都通过网关，从而有效地隐藏了微服务。 在请求时，网关将原始用户令牌转换为内部会话 ID 令牌。在这种情况下，注销就不是问题，因为网关可以在注销时撤销用户的令牌。



### Token -->Session共享





### 第三方登录

## 【前端要求】





# 待办	功能



## A

role	checkPermission



## B

Menu



## C



Zero重复

# 模块



## 【玄机谱】



### 勋章



### 技能树

### 技能树 SkillList



### ｛KMS知识管理｝

文档类型【MarkDowm，富文本,链接，附件】

概览【类知乎的标题--内容概览CMS列表】

Tag 标签关联技能树知识点

关联树可采用现有方案，可自行扩展或自建



除项目文档外，技术文档，制度规章与协约

培训课程教材【Front，DBA，算法】

论文，技术原理，实践经验，搭建部署手册

技术应用的经验，数据库，算法，智能与挖掘的知识积累

众志成城集思广益



ContributionStandard？？



## 英雄风采pictures

勋章等级	类型[勋章来源，TaskID？]	

```
    public int? TaskId { get; set; }
    public int? GainType { get; set; }
```

职位Title等级，类型

Resource书籍来源【Type/Setting】

## 【聚义厅-】 	Members

- [ ] 积分
- [ ] 技能
- [ ] 图书
- [x] 勋章
- [x] 反馈，标签
- [x] 职位
- [ ] 考评，年度积分

### 成员资料Member	M

##### GetMemberProfile【编辑个人资料】

显示成员的一些基础信息。成员自己和管理员可以编辑资料信息



离职成员的Account更改isActive





### 成员标签MemberLabel【个人标签】M

l 显示成员收到的标签信息及个数。所有成员都可以给自己和他人添加标签

### 读书记录 ReadingList

l 显示成员阅读的书籍记录。自己和管理员可以添加书籍记录

##### 馆藏书评

##### 私人书评

### 成员技能memberskills

l 技能树		显示成员所掌握的相关编程技能。管理员可编辑

### 成员勋章授予纪录membermedals

### 反馈 FeedbackList 	M

l 显示成员收到的反馈记录。自己和管理员可查看所有反馈记录。匿名用户只可看见匿名用户的反馈记录。其他成员只能看到自己写的反馈记录。成员自己和管理员可以看见所有反馈记录。所有人均可添加反馈记录

### 积分记录		【？】

- [ ] ​	积分与反馈记录的分页	填充最高行数

显示成员获得的积分记录。管理员可添加积分记录

## 【聚义厅-】	IsAdmin

### 积分 IntegralsList

### 总积分

##### 年度积分

### 考评 AppraisalList

l 显示成员的考评记录。管理员可添加考评记录

##### 年度

##### 类型 

##### 价值观 

##### 绩效

##### 总分

##### 结果



### 礼物 GiftsList	M

l 显示成员收到的生日礼物记录。管理员可添加礼物记录

### 职位 TitleChangeList	M	【？】

l 	显示成员的职位变更记录。管理员可添加职位变更记录

- [ ] 需要管理？【Type/Setting】

##### titlechanges

 

## 【撷英阁】-book	M	 



- 查看馆藏图书

- 筛选馆藏图书

- 添加新书

- 查看图书详情

- 修改图书详情

  

  0可借，1已借，2丢失

- 借阅

- 还书

  - 还书是否继续同步录入书评

- 图书设为丢失

  





### 书评book_comment	M

- [ ] 书名长度限制多少
- [ ] 书评长度限制



##### 馆藏书评	书评是否给改

##### 私人书评

- 评论
- 双列表
- 查看书评
- 添加书评M
- 编辑书评M
- 删除书评

> - comment 是评论，一般指你对别人的作品或言论而给出的评论，remark 所表示的“说话”含有评论性的意思.
> - review是回顾，论文中有一重要部分就是literature review，也就是回顾前面的研究。也有复习的意思。只有名词是“评论” 动词：vt.& vi.写…的评论文章
> - remark 就是普通的言论.remark 所表示的“说话”含有评论性的意思.
> - https://www.zybang.com/question/e1e02b0c751b5e96b35ec6dd55cc2db1.html



> 实体审计--可视化综合面板
>
> ​	idGet点击量	订阅量	时间
>
> ​	

> Resourcem默认为Collection短语 
> [馆藏](javascript:;) archives storagecollection 
> [馆藏建设](javascript:;) Collection Buildingcollection constructioncollection developmentconstruction of library collection 
> [特色馆藏](javascript:;) Special CollectionsFeatured Collectioncharacteristic collection

> private强调是个人隐私的，私密的，是你不愿公开透露让过多人知道的
> personal强调是个人的，与隐私不一定有关，只是与你个人有关的



## 【快活林】 parties



### 团建照片partyphotos



### 团建评论partiesreviews

### 经费Foud









## ｛Task｝

### 引言

FreeMind	BPM流程	需求池

## 【白虎堂】

### 任务视图

### 计划plans

### 任务视图[平铺]

### 计划视图 （时间横向季度线）

### 看板视图（状态）

##### 燃尽图

```
	敏捷项目进度管理-[燃尽图实践](http://pmquanzi.com/articlDetails/400.html)案例分享
```

![image014.jpg](../../../Program Files/Typora)

#### 可扩展甘特图 /日历

![img](../../../Program Files/Typora)



### 组员taskpartners

### 任务详情

### Todo

### 跟进tasktrackings

### 任务反馈task_feedback

### 关键结果keyresults

### 交流回复

### taskcommunications

### communicationreplys



### 实际进度

### 点评结果 taskreviews

### 贡献点contribution_standard

### 勋章medals

### 成员标签MemberLabel



## 积分 integrals



### 年度积分 annualintegrals



## 勋章



### 成员勋章授予纪录 membermedals

### 勋章等级

### 启用状态



## 【琅琊榜】

### 考评榜

### 积分榜

### 勋章榜